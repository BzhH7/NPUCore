# NPUcore-Ovo 项目概述文档

## 1. 项目简介

### 1.1 项目名称
**OSKernel2025-NPUcore-Ovo** (RISC-V + LoongArch 双架构操作系统内核)

### 1.2 项目背景
NPUcore-Ovo 是基于 `NPUcore-BLOSSOM` 框架开发的竞赛操作系统内核，参考借鉴了多个优秀参赛队伍与 Linux 内核的设计理念，完善其内部功能实现并进行迭代升级而形成的操作系统。

### 1.3 项目目标
- 提供一个支持 RISC-V 和 LoongArch 双架构的操作系统内核
- 实现完整的进程管理、内存管理、文件系统、网络协议栈等核心功能
- 参与全国大学生计算机系统能力大赛操作系统设计赛

## 2. 项目特性

### 2.1 双架构支持
| 架构 | 目标平台 | 状态 |
|------|---------|------|
| RISC-V 64 (rv64gc) | QEMU virt / VisionFive2 | ✅ 支持 |
| LoongArch 64 | QEMU / 2K1000 开发板 | ✅ 支持 |

### 2.2 核心功能
- **进程管理**: 多进程/多线程、进程调度、信号处理
- **内存管理**: 分页虚拟内存、写时复制 (CoW)、ZRAM 压缩
- **文件系统**: FAT32、EXT4 文件系统支持
- **设备驱动**: VirtIO 块设备、SATA、串口等
- **网络协议栈**: TCP/UDP Socket、smoltcp 协议栈
- **系统调用**: 兼容 Linux 系统调用接口

### 2.3 高级特性
- OOM (Out of Memory) 处理机制
- Swap 交换空间支持
- 页面缓存 (Page Cache)
- Futex 快速用户空间互斥锁
- 多核 SMP 支持（实验性）

## 3. 技术栈

### 3.1 开发语言
- **主要语言**: Rust (no_std 环境)
- **辅助语言**: 汇编语言 (RISC-V/LoongArch)

### 3.2 工具链
| 工具 | 版本/描述 |
|------|-----------|
| Rust Toolchain | nightly-2024-05-01 |
| RISC-V Target | riscv64gc-unknown-none-elf |
| LoongArch Target | loongarch64-unknown-none |
| QEMU | 系统模拟器 |

### 3.3 核心依赖库
| 依赖 | 用途 |
|------|------|
| lazy_static | 静态变量延迟初始化 |
| buddy_system_allocator | 伙伴系统内存分配器 |
| spin | 自旋锁实现 |
| bitflags | 位标志处理 |
| xmas-elf | ELF 文件解析 |
| virtio-drivers | VirtIO 设备驱动 |
| smoltcp | TCP/IP 协议栈 |
| log | 日志框架 |

## 4. 项目结构概览

```
oskernel2025-ovo/
├── os/                     # 内核主代码
│   ├── src/                # 源代码目录
│   │   ├── main.rs         # 内核入口
│   │   ├── mm/             # 内存管理模块
│   │   ├── task/           # 进程/线程管理
│   │   ├── fs/             # 文件系统
│   │   ├── syscall/        # 系统调用
│   │   ├── drivers/        # 设备驱动
│   │   ├── net/            # 网络协议栈
│   │   └── hal/            # 硬件抽象层
│   ├── Makefile            # 构建脚本
│   └── Cargo.toml          # Rust 项目配置
├── user/                   # 用户态程序
├── dependency/             # 外部依赖库
├── bootloader/             # 引导加载程序
├── apps/                   # 应用程序
├── util/                   # 工具程序
└── fs-img-dir/             # 文件系统镜像目录
```

## 5. 版本信息

- **当前版本**: 0.1.0
- **Rust Edition**: 2018
- **许可证**: 见 LICENSE 文件

## 6. 参考资料

- Linux 内核源码
- rCore-Tutorial
- NPUcore-BLOSSOM 框架
- RISC-V 特权级规范
- LoongArch 架构手册

## 7. 维护团队

本项目由参加全国大学生计算机系统能力大赛的团队维护开发。

---

*文档版本: 1.0*  
*最后更新: 2026年1月*
